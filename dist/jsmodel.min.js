/**
 * Created by MPoreda on 08.12.2017.
 */
function jsModel(e,r){function a(a,n){if(n){i=[];Object.defineProperty(i,"appendData",{enumerable:!1,configurable:!1,writable:!1,value:function(e){this.push(e)}})}else var i=t(!1,{url:e,params:r});var o=new XMLHttpRequest;return o.open("GET",a,!0),o.onload=function(e){if(4===o.readyState)if(200===o.status){var r=JSON.parse(o.responseText);if(n){if(Array.isArray(r))for(var a in r)i.appendData(t(r[a]))}else Array.isArray(r)||i.writeData(r)}else console.error(o.statusText)},o.onerror=function(e){console.error(o.statusText)},o.send(null),i}function t(e,r){function a(e,r,a){var t=new XMLHttpRequest;t.open(r,a,!0),t.onload=function(r){if(4===t.readyState)if(t.status>=200&&t.status<300){var a=JSON.parse(t.responseText);Array.isArray(a)||e.writeData(a)}else console.error(t.statusText)},t.onerror=function(e){console.error(t.statusText)},t.send(JSON.stringify(e))}var t={};if(Object.defineProperty(t,"properties",{enumerable:!1,configurable:!1,writable:!1,value:r}),Object.defineProperty(t,"writeData",{enumerable:!1,configurable:!1,writable:!1,value:function(e){for(var r in e)this[r]=e[r]}}),Object.defineProperty(t,"save",{enumerable:!1,configurable:!1,writable:!1,value:function(){var e=this.properties.url;for(var r in this.properties.params)e=e.replace("/:"+r,"");a(t,"POST",e)}}),Object.defineProperty(t,"update",{enumerable:!1,configurable:!1,writable:!1,value:function(){var e=this.properties.url;for(var r in this.properties.params)for(var n in this)r==n&&(e=e.replace("/:"+r,"/"+this[n]));a(t,"PUT",e)}}),e)for(var n in e)t[n]=e[n];return t}var e=e,r=r,n=function(){return new t(!1,{url:e,params:r})};return n.query=function(t){var n=e;if(t)for(var i in r)for(var o in t)i==o&&(n=n.replace("/:"+i,"/"+t[o]));else for(var i in r)n=n.replace("/:"+i,"");return a(n,!0)},n.get=function(t){var n=e;if(t)for(var i in r)for(var o in t)i==o&&(n=n.replace("/:"+i,"/"+t[o]));else for(var i in r)n=n.replace("/:"+i,"");return a(n)},n}